{
	"info": {
		"_postman_id": "0673fd68-4967-47f5-9c1a-9735b714b3dd",
		"name": "HIHAPI",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Without Login",
			"item": [
				{
					"name": "Currencies",
					"item": [
						{
							"name": "Get Collection",
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/Currencies?$count=true",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"Currencies"
									],
									"query": [
										{
											"key": "$count",
											"value": "true"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "READ",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/Currencies('CNY')",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"Currencies('CNY')"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Languages",
					"item": [
						{
							"name": "Get Collection",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/Languages?$count=true",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"Languages"
									],
									"query": [
										{
											"key": "$count",
											"value": "true"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Read Language 4",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/Languages(4)",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"Languages(4)"
									]
								}
							},
							"response": []
						},
						{
							"name": "Read Language 4 - second format",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/Languages/4",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"Languages",
										"4"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "DB Version",
					"item": [
						{
							"name": "DB Version List",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/DBVersions?$count=true",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"DBVersions"
									],
									"query": [
										{
											"key": "$count",
											"value": "true"
										}
									]
								}
							},
							"response": []
						},
						{
							"name": "Read version 1",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/DBVersions(1)",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"DBVersions(1)"
									]
								}
							},
							"response": []
						},
						{
							"name": "Read version 1 - second format",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/DBVersions/1",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"DBVersions",
										"1"
									]
								}
							},
							"response": []
						},
						{
							"name": "Check Latest Version",
							"request": {
								"method": "POST",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/DBVersions",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"DBVersions"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Metadata",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://localhost:44360/$metadata",
							"protocol": "https",
							"host": [
								"localhost"
							],
							"port": "44360",
							"path": [
								"$metadata"
							]
						}
					},
					"response": []
				},
				{
					"name": "Debug Odata Endpoints",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "https://localhost:44360/$odata",
							"protocol": "https",
							"host": [
								"localhost"
							],
							"port": "44360",
							"path": [
								"$odata"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "With Login",
			"item": [
				{
					"name": "Home Defines",
					"item": [
						{
							"name": "Home Members",
							"item": [
								{
									"name": "Get Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/HomeMembers",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"HomeMembers"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Get Collection",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "https://localhost:44360/HomeDefines",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"HomeDefines"
									]
								}
							},
							"response": []
						},
						{
							"name": "Create Home Define",
							"request": {
								"method": "POST",
								"header": [],
								"body": {
									"mode": "raw",
									"raw": "{\r\n    \"Name\": \"Postman testing\",\r\n    \"Details\": \"Posting testing details\",\r\n    \"Host\": \"59ae97fd-79c5-4468-976f-273639b5f976\",\r\n    \"BaseCurrency\": \"CNY\",\r\n    \"HomeMembers\": [\r\n        {\r\n            \"User\": \"59ae97fd-79c5-4468-976f-273639b5f976\",\r\n            \"DisplayAs\": \"Tester\",\r\n            \"Relation\": \"Self\"\r\n        }\r\n    ]\r\n}\r\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://localhost:44360/HomeDefines",
									"protocol": "https",
									"host": [
										"localhost"
									],
									"port": "44360",
									"path": [
										"HomeDefines"
									]
								}
							},
							"response": []
						}
					]
				},
				{
					"name": "Finance",
					"item": [
						{
							"name": "Account",
							"item": [
								{
									"name": "Get Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/FinanceAccounts?$count=true&$filter=HomeID eq 2",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinanceAccounts"
											],
											"query": [
												{
													"key": "$count",
													"value": "true"
												},
												{
													"key": "$filter",
													"value": "HomeID eq 2"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "Create an Account",
									"request": {
										"method": "POST",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"HomeID\": {{TestHomeID}},\r\n    \"CategoryID\": 1,\r\n    \"Name\": \"My Cash 1\",\r\n    \"Comment\": \"My Cash 1\"\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "https://localhost:44360/FinanceAccounts",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinanceAccounts"
											]
										}
									},
									"response": []
								},
								{
									"name": "Read Account",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/FinanceAccounts?$count=true&$filter=HomeID eq 2 and ID eq {{TestCashAccountID}}",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinanceAccounts"
											],
											"query": [
												{
													"key": "$count",
													"value": "true"
												},
												{
													"key": "$filter",
													"value": "HomeID eq 2 and ID eq {{TestCashAccountID}}"
												}
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Configuration",
							"item": [
								{
									"name": "Account Categories",
									"item": [
										{
											"name": "Get Collection",
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "https://localhost:44360/FinanceAccountCategories?$count=true&$filter=HomeID eq {{TestHomeID}}",
													"protocol": "https",
													"host": [
														"localhost"
													],
													"port": "44360",
													"path": [
														"FinanceAccountCategories"
													],
													"query": [
														{
															"key": "$count",
															"value": "true"
														},
														{
															"key": "$filter",
															"value": "HomeID eq {{TestHomeID}}"
														}
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Asset Categories",
									"item": [
										{
											"name": "Get Collection",
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "https://localhost:44360/FinanceAssetCategories",
													"protocol": "https",
													"host": [
														"localhost"
													],
													"port": "44360",
													"path": [
														"FinanceAssetCategories"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Transaction Types",
									"item": [
										{
											"name": "Get Collection",
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "https://localhost:44360/FinanceTransactionTypes",
													"protocol": "https",
													"host": [
														"localhost"
													],
													"port": "44360",
													"path": [
														"FinanceTransactionTypes"
													]
												}
											},
											"response": []
										}
									]
								},
								{
									"name": "Document Types",
									"item": [
										{
											"name": "Get Collection",
											"request": {
												"method": "GET",
												"header": [],
												"url": {
													"raw": "https://localhost:44360/FinanceDocumentTypes",
													"protocol": "https",
													"host": [
														"localhost"
													],
													"port": "44360",
													"path": [
														"FinanceDocumentTypes"
													]
												}
											},
											"response": []
										}
									]
								}
							]
						},
						{
							"name": "Document",
							"item": [
								{
									"name": "Get Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/FinanceDocuments?$count=true&$filter=HomeID eq {{TestHomeID}}",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinanceDocuments"
											],
											"query": [
												{
													"key": "$count",
													"value": "true"
												},
												{
													"key": "$filter",
													"value": "HomeID eq {{TestHomeID}}"
												}
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Control Centers",
							"item": [
								{
									"name": "Get Collections",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/FinanceControlCenters",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinanceControlCenters"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Order",
							"item": [
								{
									"name": "Get Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/FinanceOrders",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinanceOrders"
											]
										}
									},
									"response": []
								}
							]
						},
						{
							"name": "Plans",
							"item": [
								{
									"name": "Get Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/FinancePlans",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"FinancePlans"
											]
										}
									},
									"response": []
								}
							]
						}
					],
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				},
				{
					"name": "Blog",
					"item": [
						{
							"name": "Blog Format",
							"item": [
								{
									"name": "GET Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/BlogFormats",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"BlogFormats"
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "Learn",
					"item": [
						{
							"name": "Learn Objects",
							"item": [
								{
									"name": "Get Collection",
									"request": {
										"method": "GET",
										"header": [],
										"url": {
											"raw": "https://localhost:44360/LearnObjects",
											"protocol": "https",
											"host": [
												"localhost"
											],
											"port": "44360",
											"path": [
												"LearnObjects"
											]
										}
									},
									"response": []
								}
							]
						}
					],
					"auth": {
						"type": "bearer",
						"bearer": [
							{
								"key": "token",
								"value": "{{IdServerToken}}",
								"type": "string"
							}
						]
					},
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					]
				}
			],
			"auth": {
				"type": "bearer",
				"bearer": [
					{
						"key": "token",
						"value": "{{IdServerToken}}",
						"type": "string"
					}
				]
			},
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"type": "text/javascript",
						"exec": [
							"var tokenCreatedAt = pm.collectionVariables.get(\"IdServerToken_CreatedAt\");",
							"",
							"if (!tokenCreatedAt) {",
							"    tokenCreatedAt = new Date(new Date().setDate(new Date().getDate() - 1))",
							"}",
							"",
							"var tokenExpiresIn = pm.collectionVariables.get(\"IdServerToken_ExpiresIn\");",
							"",
							"if (!tokenExpiresIn) {",
							"    tokenExpiresIn = 5000;",
							"}",
							"",
							"var tokenCreatedTime = (new Date() - Date.parse(tokenCreatedAt))",
							"",
							"if (tokenCreatedTime >= tokenExpiresIn) {",
							"",
							"    console.log(\"The token has expired. Attempting to request a new token.\");",
							"",
							"    pm.sendRequest({",
							"        url: pm.variables.get(\"IdServerToken_Url\"),",
							"        method: 'POST',",
							"        header: {",
							"            'Accept': 'application/json',",
							"            'Content-Type': 'application/x-www-form-urlencoded'",
							"        },",
							"        body: {",
							"            mode: 'urlencoded',",
							"            urlencoded: [{",
							"                    key: \"client_id\",",
							"                    value: pm.collectionVariables.get(\"IdServerToken_ClientId\"),",
							"                    disabled: false",
							"                },",
							"                {",
							"                    key: \"client_secret\",",
							"                    value: pm.collectionVariables.get(\"IdServerToken_ClientSecret\"),",
							"                    disabled: false",
							"                },",
							"                {",
							"                    key: \"scope\",",
							"                    value: \"api.hih\",",
							"                    disabled: false",
							"                },",
							"                {",
							"                    key: \"grant_type\",",
							"                    value: \"password\",",
							"                    disabled: false",
							"                },",
							"                {",
							"                    key: \"username\",",
							"                    value: pm.collectionVariables.get(\"IdServerToken_UserName\"),",
							"                    disabled: false",
							"                },",
							"                {",
							"                    key: \"password\",",
							"                    value: pm.collectionVariables.get(\"IdServerToken_Password\"),",
							"                    disabled: false",
							"                }",
							"            ]",
							"        }",
							"    }, function(error, response) {",
							"        console.log(response.json().access_token);",
							"        ",
							"        pm.collectionVariables.set(\"IdServerToken_CreatedAt\", new Date());",
							"        pm.collectionVariables.set(\"IdServerToken\", response.json().access_token);",
							"",
							"        var expiresIn = response.json().expires_in;",
							"        ",
							"        if (expiresIn) {",
							"            tokenExpiresIn = expiresIn * 1000;",
							"        }",
							"        ",
							"        pm.collectionVariables.set(\"IdServerToken_ExpiresIn\", tokenExpiresIn);",
							"    });",
							"}",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "IdServerToken",
			"value": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjBGQUIzQjg3RUM0QjhCMTU0N0I2RTdDNjQ1RjVFMUU3IiwidHlwIjoiYXQrand0In0.eyJpc3MiOiJodHRwczovL2xvY2FsaG9zdDo0NDM1MyIsIm5iZiI6MTYyODc1NjkxMywiaWF0IjoxNjI4NzU2OTEzLCJleHAiOjE2Mjg3NjA1MTMsImF1ZCI6Imh0dHBzOi8vbG9jYWxob3N0OjQ0MzUzL3Jlc291cmNlcyIsInNjb3BlIjpbImFwaS5oaWgiXSwiYW1yIjpbInB3ZCJdLCJjbGllbnRfaWQiOiJQb3N0bWFuIiwic3ViIjoiNTlhZTk3ZmQtNzljNS00NDY4LTk3NmYtMjczNjM5YjVmOTc2IiwiYXV0aF90aW1lIjoxNjI4NzU2OTEzLCJpZHAiOiJsb2NhbCIsImp0aSI6IkJFMjFCRTYwRkRFRTM0QUY5OTRBM0NGOTBCOEJBODQ3In0.NBeCoUGa7Jqt_g_Nt_ivxFLjVlD1mna-NS5dXHRqj32UB3KFjHPvAxXF5WaQtj4opUMpyJTFUKyhstm9GjfktyEQUMVQy1L97_FE2-rTj4ANZY5XHVQKt2ul913WW3fQwzuWQq5OqWtbTQ3-EhlOufwTmfwhehy8dKbX70kpwAjgXxs6_qB9APfC6PlIFSGr1-qNp6U378GlE2oDLA6hUTKDvFuGb_cWkD0SdKevcs_ww4oOFZJrBGrJnQWk9JPIpwxzFh7jtXFORL05ZB1JXhw-8umqUqiV8X8DetA7gFi3A7LagGDpj65NZYoJYfSzm0VtGWynIkqF-hH8AMrckQ"
		},
		{
			"key": "TestHomeID",
			"value": "2"
		},
		{
			"key": "TestCashAccountID",
			"value": "1095"
		},
		{
			"key": "IdServerToken_CreatedAt",
			"value": ""
		},
		{
			"key": "IdServerToken_ExpiresIn",
			"value": ""
		},
		{
			"key": "IdServerToken_Url",
			"value": "https://localhost:44353/connect/token"
		},
		{
			"key": "IdServerToken_ClientId",
			"value": "Postman"
		},
		{
			"key": "IdServerToken_ClientSecret",
			"value": "Postman"
		},
		{
			"key": "IdServerToken_UserName",
			"value": "tester@postman.org"
		},
		{
			"key": "IdServerToken_Password",
			"value": "Postman-2021"
		}
	]
}